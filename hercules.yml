version: 1

name: edge
debug: false
port: 9100

globalLabels:
  - cell: ausw1 # Inject prometheus labels from config
  - env: $ENV # Inject prometheus labels from env var

packages:
  # - package: hercules-packages/snowflake/performance/1.0.yml
  - package: hercules-packages/example/nyc-taxi/1.0.yml

extensions:
  core:
    - name: inet
    - name: vss
    - name: icu
    - name: fts

  community:
    - name: lindel # Linearization/Delinearization, Z-Order, Hilbert and Morton Curves
    - name: prql # Pipelined Relational Query Language
    - name: chsql # Clickhouse macros and functions

macros:
  - sql: create or replace macro one() AS (SELECT 1);

metrics:
  gauge:
    - name: one_one_one_one
      help: Testing the one() macro
      enabled: true
      sql: select struct_pack(user := 'yo') as labels, one();
      labels:
        - user
